- route:
    id: "foo-one"
    autoStartup: true
    from:
      uri: "timer:httpTimer"
    steps:
      - to: "bean:studentService?method=hello"
      - log: "${body}"
      - to: "freemarker:query.ftl"
      - log: "${body}"
      - log: "the bank name {{bank.code}}"
      - to:
          uri: "{{url}}?maxTotalConnections=100&httpMethod=POST"
      - to: "file:{{destinationPath}}?fileName=output-${date:now:yyyyMMddHHmmssSSS}.json&doneFileName=${file:name}.done"
      
      
- route:
    id: "foo-two"    
    
    from: 
      uri: "file:{{destinationPath}}?doneFileName=${file:name}.done"   
    steps:
      - bean:
         ref: headerConfigurer
         method: "process(${header.CamelFileNameProduced},'.data.organizationalProcess','body','.data.organizationalProcess')"
      
      - log: "the  final object ${body}"  
      - process: 
          ref: snowFlakeProcessor
      - log: "${body} the bank code {{bank.code}}"
